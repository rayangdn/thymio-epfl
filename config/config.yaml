# General settings
time_step: 0.1  # seconds

# Physical robot configuration
thymio:
  size:
    width: 110   # mm
    length: 110   # mm
    wheel_distance: 90  # mm
    wheel_radius: 20    # mm
  security_margin: 40     # mm
  speed_scale: 3.180 # thymio speed to mm/s scale

# World environment settings
world:
  width: 630     # mm
  height: 520    # mm
  obstacle_min_area: 500  # mmÂ²
  aruco_size: 50  # mm

# Motion control parameters
controller:
  # Rotation parameters
  angle_tolerance: 3     # degrees
  scale_rotation_speed: 90
  max_rotation_speed: 100

  # Translation parameters
  distance_tolerance: 20  # mm
  scale_translation_speed: 0.5
  min_translation_speed: 50
  max_translation_speed: 120

  # Obstacle avoidance parameters
  kidnap_threshold: 40   # mm
  obstacles_max_iter: 5
  obstacles_speed: 100
  scale_sensor: 200
  
  # Obstacle avoidance weights
  weight_left: [4, 6, -8, -6, -4]
  weight_right: [-4, -6, -8, 6, -4]

# Camera configuration
webcam:
  device_id: 2
  resolution: [1920, 1080]
  padding: 10    # pixels
  
  # Camera calibration matrix
  matrix:
    - [1484.14935, 0         , 964.220337]
    - [0         , 1490.50225, 539.531044]
    - [0         , 0         , 1         ]
  
  # Lens distortion parameters
  distortion: [0.154056967, -1.04865202, -0.000689137957, -0.00132248869e-03, 1.48905183]

# Extended Kalman Filter parameters
kalman:
  # Process noise covariance diagonal [x, y, theta, v, w]
  process_noise: [0.1, 0.1, 0.1, 0.1, 0.1]
  
  # Measurement noise covariance diagonals
  measurement_noise:
    covered: [9999999, 9999999, 9999999, 0.2, 0.2] # Set camera noise to high values when camera is covered
    uncovered: [0.1, 0.1, 0.05, 0.05, 0.05] 